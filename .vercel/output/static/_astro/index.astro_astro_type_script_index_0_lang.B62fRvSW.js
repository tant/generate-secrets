const b={username:"Random, readable string, 8-12 characters, no special characters.",password:"Minimum 16 characters, includes uppercase, lowercase, numbers, and special characters (!@#$%^&*).","postgres username":"user_ followed by 12 random alphanumeric characters.","postgres password":"Minimum 16 characters, includes only alphanumeric characters.","postgres db name":"db_ followed by 12 random lowercase alphanumeric characters.","jwtsecret 32 hex":"A 32-character random hex string (0-9, a-f).","jwtsecret 32 base64":"A 32-character random, URL-safe base64 string.",ANON_KEY:"A long, base64 string, similar in format to a JWT.",SECRET_KEY_BASE:"A 128-character random hex string.",SERVICE_ROLE_KEY:"A long, base64 string, similar in format to a JWT."},i="abcdefghijklmnopqrstuvwxyz",m="ABCDEFGHIJKLMNOPQRSTUVWXYZ",d="0123456789",f="!@#$%^&*",y=i+m+d,h="0123456789abcdef",A=i+d,u=i+m+d;function s(e,t){let n="";const r=t.length;for(let o=0;o<e;o++){const a=Math.floor(Math.random()*r);n+=t[a]}return n}function x(){const e=Math.floor(Math.random()*5)+8;return s(e,u)}function S(){const t=y+f;let n="";return n+=s(1,m),n+=s(1,i),n+=s(1,d),n+=s(1,f),n+=s(12,t),n.split("").sort(()=>Math.random()-.5).join("")}function w(){return`user_${s(12,u)}`}function C(){return s(16,u)}function L(){return`db_${s(12,A)}`}function v(){return s(32,h)}function M(){const e=new Uint8Array(32);for(let t=0;t<32;t++)e[t]=Math.floor(Math.random()*256);return btoa(String.fromCharCode(...e))}function R(){const e=new Uint8Array(48);for(let t=0;t<48;t++)e[t]=Math.floor(Math.random()*256);return btoa(String.fromCharCode(...e))}function _(){return s(128,h)}function I(){const e=new Uint8Array(48);for(let t=0;t<48;t++)e[t]=Math.floor(Math.random()*256);return btoa(String.fromCharCode(...e))}function T(){return{username:x(),password:S(),"postgres username":w(),"postgres password":C(),"postgres db name":L(),"jwtsecret 32 hex":v(),"jwtsecret 32 base64":M(),ANON_KEY:R(),SECRET_KEY_BASE:_(),SERVICE_ROLE_KEY:I()}}function B(e){const t=document.getElementById("secrets-container");let n='<div class="space-y-3">';for(const[r,o]of Object.entries(e)){const a=b[r]||"No explanation available.",l=r.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"");n+=`
						<div class="flex flex-col sm:flex-row sm:items-center gap-2 p-3 bg-base-200 rounded-btn relative group">
							<div class="flex items-center gap-2">
								<span class="font-medium truncate">${r}:</span>
								<button 
									class="btn btn-xs btn-circle btn-ghost tooltip-trigger" 
									aria-label="Show explanation for ${r}"
									data-tooltip="${a}"
									data-label="${l}"
								>
									?
								</button>
							</div>
							<span class="font-mono text-sm break-all flex-1">${o}</span>
							<div 
								id="tooltip-${l}"
								class="tooltip-content hidden absolute left-0 top-full mt-2 z-10 w-64 p-3 bg-base-100 border border-base-300 rounded-btn shadow-lg text-sm"
								role="tooltip"
							>
								${a}
							</div>
						</div>
					`}n+="</div>",t.innerHTML=n,N()}function N(){document.querySelectorAll(".tooltip-trigger").forEach(t=>{const n=t.getAttribute("data-label"),r=document.getElementById(`tooltip-${n}`);t.addEventListener("click",o=>{o.stopPropagation(),g(),P(r)}),t.addEventListener("keydown",o=>{o.key==="Escape"&&($(r),t.blur())})}),document.addEventListener("click",t=>{!t.target.closest(".tooltip-trigger")&&!t.target.closest(".tooltip-content")&&g()})}function P(e){e&&e.classList.remove("hidden")}function $(e){e&&e.classList.add("hidden")}function g(){document.querySelectorAll(".tooltip-content").forEach(t=>t.classList.add("hidden"))}function c(e){const t=document.getElementById("error-message"),n=document.getElementById("error-text");n&&(n.textContent=e),t&&(t.classList.remove("hidden"),setTimeout(()=>{t&&t.classList.add("hidden")},5e3))}function p(){const e=document.getElementById("copy-confirmation");e&&(e.classList.remove("hidden"),setTimeout(()=>{e&&e.classList.add("hidden")},2e3))}document.getElementById("generate-btn").addEventListener("click",()=>{try{const e=document.getElementById("error-message");e&&e.classList.add("hidden");const t=T();B(t)}catch(e){c("Failed to generate secrets: "+e.message)}});document.getElementById("copy-btn").addEventListener("click",()=>{try{const e=document.getElementById("error-message");e&&e.classList.add("hidden");const t=document.querySelectorAll("#secrets-container .flex");if(t.length===0){c("No secrets to copy. Please generate secrets first.");return}let n="";t.forEach(r=>{const o=r.querySelector("span.font-medium"),a=r.querySelector("span.font-mono");if(o&&a){const l=o.textContent.replace(":",""),E=a.textContent;n+=`${l}=${E}
`}}),navigator.clipboard.writeText(n).then(()=>{p()}).catch(r=>{try{const o=document.createElement("textarea");o.value=n,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select();const a=document.execCommand("copy");document.body.removeChild(o),a?p():c("Failed to copy to clipboard using fallback method")}catch(o){c("Failed to copy to clipboard: "+(r.message||o.message))}})}catch(e){c("Failed to copy secrets: "+e.message)}});
